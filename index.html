<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/src/styles/style.css" />
    <link rel="stylesheet" href="/src/styles/text.css" />
    <link rel="stylesheet" href="/src/styles/colors.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airbnb</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>
  <body>
    <header class="header">
      <nav>
        <button
          class="airbnbButton"
          type="button"
          onclick="navigateSection('home')"
        >
          <img
            src="/public/assets/logo.svg"
            style="width: 25px"
            alt="Airbnb logo"
          />
          <p class="text-lg">Airbnb</p>
        </button>
        <button
          class="mobileMenuButton"
          type="button"
          onclick="handleMobileMenu()"
        >
          <img
            src="/public/assets/hamb-menu.svg"
            style="width: 35px"
            alt="hamburger menu icon"
          />
        </button>
        <div class="mainNav">
          <button onclick="selectCategory('maisons')">Maisons</button>
          <button onclick="selectCategory('appartements')">Appartements</button>
          <button onclick="selectCategory('garage')">Garage</button>
        </div>
        <div class="actionsNav">
          <button onclick="navigateSection('create')">Ajouter</button>
          <button onclick="navigateSection('connection')">Admin</button>
        </div>
      </nav>
    </header>
    <ul class="mobileNavList">
      <li>
        <a href="#" onclick="handleMenuItemClick('create')"
          >Ajouter une annonce</a
        >
      </li>
      <li>
        <a href="#" onclick="handleMenuItemClick('connection')"
          >Espace administrateur</a
        >
      </li>
      <div>
        <img
          src="/public/assets/logo.svg"
          style="width: 30px"
          alt="Airbnb logo"
        />
        <a href="#" onclick="handleMenuItemClick('home');">Airbnb</a>
      </div>
    </ul>
    <div id="app">
      <div id="homePage" class="page" style="display: none">
        <!-- Content for the home page goes here -->
        <div class="home-container">
          <div class="filters-container">
            <button class="mobile-trigger">
              <img src="/public/assets/filter-icon.svg" alt="" srcset="" />
              Filtres
            </button>
          </div>
          <div class="annonces"></div>
        </div>
      </div>
      <div id="createPage" class="page" style="display: none">
        <div class="create-container">
          <h1>Ajouter une annonce</h1>
          <p>Remplissez le formulaire pour ajouter une nouvelle annonce.</p>
          <p>Quel type de bien souhaitez-vous ajouter?</p>
          <select name="type" id="typeSelect" onchange="handleTypeChange()">
            <option value="maison">maison</option>
            <option value="appartement">appartement</option>
            <option value="garage">garage</option>
          </select>
          <form id="maisonForm">
            <div class="field-container">
              <label for="ville">Ville</label>
              <input
                required
                maxlength="30"
                type="text"
                name="ville"
                id="maisonVille"
              />
            </div>
            <div class="field-container">
              <label for="pays">Pays</label>
              <input
                required
                maxlength="20"
                type="text"
                name="pays"
                id="maisonPays"
              />
            </div>
            <div class="field-container">
              <label for="prestataire">Prestataire</label>
              <select required name="prestataire" id="maisonPrestataire">
                <option value="professionnel">professionnel</option>
                <option value="particulier">particulier</option>
              </select>
            </div>
            <div class="field-container">
              <label for="duree">Duree</label>
              <input
                required
                maxlength="20"
                type="text"
                name="duree"
                id="maisonDuree"
              />
            </div>
            <div class="field-container">
              <label for="prix">Prix / jour</label>
              <input
                required
                type="number"
                max="1000"
                min="100"
                name="prix"
                id="maisonPrix"
              />
            </div>
            <div class="field-container">
              <label for="etages">Etages</label>
              <input
                required
                type="number"
                min="1"
                max="5"
                name="etages"
                id="maisonEtages"
              />
            </div>
            <div class="field-container">
              <label for="photo">Photo</label>
              <input
                type="file"
                name="photo"
                id="maisonPhoto"
                accept="image/*"
              />
            </div>
            <div class="field-container">
              <label for="jardin">Jardin</label>
              <input type="checkbox" name="jardin" id="maisonJardin" />
            </div>
            <div class="field-container">
              <label for="garage">Garage</label>
              <input type="checkbox" name="garage" id="maisonGarage" />
            </div>

            <button type="submit">Ajouter</button>
          </form>
          <form id="appartementForm">appartement form</form>
          <form id="garageForm">Garage form</form>
        </div>
        <!-- Content for the create page goes here -->
      </div>
      <div id="connectionPage" class="page" style="display: none">
        <!-- Content for the connection page goes here -->
      </div>
      <div id="adminPage" class="page" style="display: none">
        <!-- Content for the admin page goes here -->
      </div>
    </div>
    <script>
      "use strict";

      const app = document.getElementById("app");
      const typeSelect = document.querySelector("#typeSelect");
      const createContainer = document.querySelector(".create-container");
      const createForms = createContainer.querySelectorAll("form");
      // console.log(createForms);
      // console.log(app);
      window.onload = () => {
        // navigateSection("home");
        navigateSection("create");
        showSelectedForm(typeSelect.value);
      };
      const mobileNavList = document.querySelector(".mobileNavList");
      // console.log(mobileNavList);
      mobileNavList.style.display = "none";

      let selectedCategory = "";

      function handleMenuItemClick(section) {
        navigateSection(section);
        handleMobileMenu();
      }

      // Function to select a category
      function selectCategory(category) {
        selectedCategory = category; // Corrected variable name
        console.log(selectedCategory);
        updateCategoryStyle(); // Update the style of category buttons
      }

      // Function to update the style of category buttons
      function updateCategoryStyle() {
        const buttons = document.querySelectorAll(".mainNav button"); // Select all category buttons
        buttons.forEach((button) => {
          if (button.textContent.toLowerCase() === selectedCategory) {
            button.style.fontWeight = "500"; // Add a class to the selected category button
          } else {
            button.style.fontWeight = "300"; // Remove the class from other buttons
          }
        });
      }
      function handleMobileMenu() {
        if (mobileNavList.style.display === "none") {
          mobileNavList.style.display = "flex";
        } else {
          mobileNavList.style.display = "none";
        }
      }

      // redirige vers la bonne section et call la fonction d'injection du contenu
      function navigateSection(section) {
        document.querySelectorAll(".page").forEach((page) => {
          page.style.display = "none"; // Hide all pages
        });

        const pageId = section + "Page";
        const page = document.getElementById(pageId);
        if (page) {
          page.style.display = "block"; // Show the selected page
        }
      }

      function handleTypeChange() {
        showSelectedForm(typeSelect.value);
      }

      function showSelectedForm(type) {
        // console.log(type);
        const selectedForm = document.querySelector(`#${type}Form`);
        // console.log(selectedForm);
        createForms.forEach((form) => {
          if (form === selectedForm) {
            form.style.display = "flex";
          } else {
            form.style.display = "none";
          }
        });
      }
    </script>
  </body>
</html>
